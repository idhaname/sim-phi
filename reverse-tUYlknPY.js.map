{"version":3,"file":"reverse-tUYlknPY.js","sources":["../src/plugins/demo/reverse.js"],"sourcesContent":["// 规范判定线事件\nfunction arrangeLineEvent(events) {\n  const oldEvents = JSON.parse(JSON.stringify(events)); // 深拷贝\n  const newEvents = [\n    {\n      // 以1-1e6开头\n      startTime: 1 - 1e6,\n      endTime: 0,\n      start: oldEvents[0] ? oldEvents[0].start : 0,\n      end: oldEvents[0] ? oldEvents[0].start : 0,\n      start2: oldEvents[0] ? oldEvents[0].start2 : 0,\n      end2: oldEvents[0] ? oldEvents[0].start2 : 0\n    }\n  ];\n  oldEvents.push({\n    // 以1e9结尾\n    startTime: 0,\n    endTime: 1e9,\n    start: oldEvents[oldEvents.length - 1] ? oldEvents[oldEvents.length - 1].end : 0,\n    end: oldEvents[oldEvents.length - 1] ? oldEvents[oldEvents.length - 1].end : 0,\n    start2: oldEvents[oldEvents.length - 1] ? oldEvents[oldEvents.length - 1].end2 : 0,\n    end2: oldEvents[oldEvents.length - 1] ? oldEvents[oldEvents.length - 1].end2 : 0\n  });\n  for (const i2 of oldEvents) {\n    // 保证时间连续性\n    const i1 = newEvents[newEvents.length - 1];\n    if (i2.startTime > i2.endTime) continue;\n    if (i1.endTime > i2.endTime) {\n      // i1吃掉i2\n    } else if (i1.endTime === i2.startTime) newEvents.push(i2);\n    else if (i1.endTime < i2.startTime) {\n      newEvents.push({\n        startTime: i1.endTime,\n        endTime: i2.startTime,\n        start: i1.end,\n        end: i1.end,\n        start2: i1.end2,\n        end2: i1.end2\n      }, i2);\n    } else if (i1.endTime > i2.startTime) {\n      newEvents.push({\n        startTime: i1.endTime,\n        endTime: i2.endTime,\n        start: (i2.start * (i2.endTime - i1.endTime) + i2.end * (i1.endTime - i2.startTime)) / (i2.endTime - i2.startTime),\n        end: i1.end,\n        start2: (i2.start2 * (i2.endTime - i1.endTime) + i2.end2 * (i1.endTime - i2.startTime)) / (i2.endTime - i2.startTime),\n        end2: i1.end2\n      });\n    }\n  }\n  // 合并相同变化率事件\n  const newEvents2 = [newEvents.shift()];\n  for (const i2 of newEvents) {\n    const i1 = newEvents2[newEvents2.length - 1];\n    const d1 = i1.endTime - i1.startTime;\n    const d2 = i2.endTime - i2.startTime;\n    if (i2.startTime === i2.endTime) {\n      // 忽略0长度事件\n    } else if (i1.end === i2.start && i1.end2 === i2.start2 && (i1.end - i1.start) * d2 === (i2.end - i2.start) * d1 && (i1.end2 - i1.start2) * d2 === (i2.end2 - i2.start2) * d1) {\n      i1.endTime = i2.endTime;\n      i1.end = i2.end;\n      i1.end2 = i2.end2;\n    } else newEvents2.push(i2);\n  }\n  return JSON.parse(JSON.stringify(newEvents2));\n}\nclass JudgeLineEvent {\n  constructor(start, end, start2, end2, startTime, endTime) {\n    this.startTime = startTime;\n    this.endTime = endTime;\n    this.start = start;\n    this.end = end;\n    this.start2 = start2;\n    this.end2 = end2;\n  }\n}\nclass Note {\n  constructor(type, time, positionX, holdTime, speed) {\n    this.type = type;\n    this.time = time;\n    this.positionX = positionX;\n    this.holdTime = holdTime;\n    this.speed = speed;\n    this.floorPosition = 0;\n  }\n}\nclass SpeedEvent {\n  constructor(value, startTime, endTime) {\n    this.startTime = startTime;\n    this.endTime = endTime;\n    this.floorPosition = 0;\n    this.value = value;\n  }\n}\nclass JudgeLine {\n  constructor() {\n    this.numOfNotes = 0;\n    this.numOfNotesAbove = 0;\n    this.numOfNotesBelow = 0;\n    this.bpm = 120;\n    /** @type {SpeedEvent[]} */\n    this.speedEvents = [];\n    /** @type {Note[]} */\n    this.notesAbove = [];\n    /** @type {Note[]} */\n    this.notesBelow = [];\n    /** @type {JudgeLineEvent[]} */\n    this.judgeLineDisappearEvents = [];\n    /** @type {JudgeLineEvent[]} */\n    this.judgeLineMoveEvents = [];\n    /** @type {JudgeLineEvent[]} */\n    this.judgeLineRotateEvents = [];\n  }\n  updateSefp() {\n    let y = 0;\n    this.speedEvents.sort((a, b) => a.startTime - b.startTime);\n    for (const evt of this.speedEvents) {\n      if (evt.startTime < 0) evt.startTime = 0;\n      evt.floorPosition = y;\n      y += (evt.endTime - evt.startTime) * evt.value / this.bpm * 1.875;\n    }\n    this.speedEvents[this.speedEvents.length - 1].endTime = 1e9;\n    for (const note of this.notesAbove) {\n      let owo = 0;\n      let owo2 = 0;\n      let owo3 = 0;\n      for (const evt of this.speedEvents) {\n        if (note.time % 1e9 > evt.endTime) continue;\n        if (note.time % 1e9 < evt.startTime) break;\n        owo = evt.floorPosition;\n        owo2 = evt.value;\n        owo3 = note.time % 1e9 - evt.startTime;\n      }\n      note.floorPosition = owo + owo2 * owo3 / this.bpm * 1.875;\n      // if (j.type === 3) j.speed *= owo2;\n    }\n    for (const note of this.notesBelow) {\n      let owo = 0;\n      let owo2 = 0;\n      let owo3 = 0;\n      for (const evt of this.speedEvents) {\n        if (note.time % 1e9 > evt.endTime) continue;\n        if (note.time % 1e9 < evt.startTime) break;\n        owo = evt.floorPosition;\n        owo2 = evt.value;\n        owo3 = note.time % 1e9 - evt.startTime;\n      }\n      note.floorPosition = owo + owo2 * owo3 / this.bpm * 1.875;\n      // if (j.type === 3) j.speed *= owo2;\n    }\n  }\n  updateDe() {\n    this.judgeLineDisappearEvents.sort((a, b) => a.startTime - b.startTime);\n    this.judgeLineMoveEvents.sort((a, b) => a.startTime - b.startTime);\n    this.judgeLineRotateEvents.sort((a, b) => a.startTime - b.startTime);\n    this.judgeLineDisappearEvents = arrangeLineEvent(this.judgeLineDisappearEvents);\n    this.judgeLineMoveEvents = arrangeLineEvent(this.judgeLineMoveEvents);\n    this.judgeLineRotateEvents = arrangeLineEvent(this.judgeLineRotateEvents);\n  }\n}\nclass Chart {\n  constructor() {\n    this.formatVersion = 3;\n    this.offset = 0;\n    this.numOfNotes = 0;\n    /** @type {JudgeLine[]} */\n    this.judgeLineList = []; // Array.from(Array(24), () => new JudgeLine);\n  }\n}\n/** @type {Map<AudioBuffer|null,boolean>|null} */\nlet kfcFkXqsVw50 = null;\nhook.before.set('kfcFkXqsVw50', () => {\n  if (!(kfcFkXqsVw50 instanceof Map)) return;\n  const /** @type {AudioBuffer|null} */ bgm = hook.bgms.get(hook.selectbgm.value).audio;\n  if (bgm != null) for (let i = 0; i < bgm.numberOfChannels; i++) bgm.getChannelData(i).reverse();\n  kfcFkXqsVw50.set(bgm, hook.awawa = !kfcFkXqsVw50.get(bgm));\n  hook.modify = hook.awawa ? a => reverse(a, hook.app.duration) : a => a;\n});\n/**\n *\n * @param {Chart} chart json\n * @param {number} duration time/s\n */\nexport function reverse(chart, duration) {\n  const chartNew = new Chart();\n  chartNew.offset = -chart.offset;\n  for (const line of chart.judgeLineList) {\n    const judgeLine = new JudgeLine();\n    const tb = duration * line.bpm / 1.875;\n    judgeLine.bpm = line.bpm;\n    for (const evt of line.speedEvents) judgeLine.speedEvents.push(new SpeedEvent(evt.value, tb - evt.endTime, tb - evt.startTime));\n    for (const note of line.notesAbove) {\n      if (note.type === 3) judgeLine.notesAbove.push(new Note(note.type, tb - note.time, note.positionX, 1, note.speed * note.holdTime));\n      else judgeLine.notesAbove.push(new Note(note.type, tb - note.time, note.positionX, note.holdTime, note.speed));\n      judgeLine.numOfNotesAbove++;\n    }\n    for (const note of line.notesBelow) {\n      if (note.type === 3) judgeLine.notesBelow.push(new Note(note.type, tb - note.time, note.positionX, 1, note.speed * note.holdTime));\n      else judgeLine.notesBelow.push(new Note(note.type, tb - note.time, note.positionX, note.holdTime, note.speed));\n      judgeLine.numOfNotesBelow++;\n    }\n    judgeLine.numOfNotes += judgeLine.numOfNotesAbove + judgeLine.numOfNotesBelow;\n    chartNew.numOfNotes += judgeLine.numOfNotes;\n    //\n    judgeLine.updateSefp();\n    line.judgeLineDisappearEvents = arrangeLineEvent(line.judgeLineDisappearEvents);\n    line.judgeLineMoveEvents = arrangeLineEvent(line.judgeLineMoveEvents);\n    line.judgeLineRotateEvents = arrangeLineEvent(line.judgeLineRotateEvents);\n    for (const evt of line.judgeLineDisappearEvents) judgeLine.judgeLineDisappearEvents.push(new JudgeLineEvent(evt.end, evt.start, evt.end2, evt.start2, tb - evt.endTime, tb - evt.startTime));\n    for (const evt of line.judgeLineMoveEvents) judgeLine.judgeLineMoveEvents.push(new JudgeLineEvent(evt.end, evt.start, evt.end2, evt.start2, tb - evt.endTime, tb - evt.startTime));\n    for (const evt of line.judgeLineRotateEvents) judgeLine.judgeLineRotateEvents.push(new JudgeLineEvent(evt.end, evt.start, evt.end2, evt.start2, tb - evt.endTime, tb - evt.startTime));\n    judgeLine.updateDe();\n    chartNew.judgeLineList.push(judgeLine);\n  }\n  return JSON.parse(JSON.stringify(chartNew)); // 规范判定线事件\n}\n/**\n * @param {HTMLElement} elem\n * @param {()=>any} activeFn\n * @param {()=>any} doneFn\n */\nfunction longPress(elem, activeFn, doneFn, failFn) {\n  let timer = null;\n  elem.addEventListener('mousedown', awaIn);\n  elem.addEventListener('mouseup', awaOut);\n  elem.addEventListener('mouseleave', awaOut);\n  elem.addEventListener('touchstart', awaIn, { passive: true });\n  elem.addEventListener('touchend', awaOut);\n  elem.addEventListener('touchcancel', awaOut);\n  function awaIn() {\n    timer = requestAnimationFrame(awaIn);\n    if (activeFn()) {\n      cancelAnimationFrame(timer);\n      doneFn();\n      elem.removeEventListener('mousedown', awaIn);\n      elem.removeEventListener('mouseup', awaOut);\n      elem.removeEventListener('mouseleave', awaOut);\n      elem.removeEventListener('touchstart', awaIn);\n      elem.removeEventListener('touchend', awaOut);\n      elem.removeEventListener('touchcancel', awaOut);\n    }\n  }\n  function awaOut() {\n    cancelAnimationFrame(timer);\n    failFn();\n  }\n}\n(function() {\n  const tt = document.querySelector('.title');\n  if (!(tt instanceof HTMLElement)) return;\n  let pressTime = NaN;\n  const revolveWorld = () => {\n    if (isNaN(pressTime)) pressTime = performance.now();\n    tt.style.cssText += `;filter:hue-rotate(${(performance.now() - pressTime) / 4}deg)`;\n    if (performance.now() - pressTime > 3473 && Math.random() * 401 < 1) return 1;\n    return 0;\n  };\n  longPress(tt, revolveWorld, () => {\n    hook.fireModal('<p>Tip</p>', '<p>Reverse Mode is on...</p>');\n    kfcFkXqsVw50 = new Map();\n    setInterval(revolveWorld, 20);\n  }, () => {\n    tt.style.cssText += ';filter:hue-rotate(0deg);';\n    pressTime = NaN;\n  });\n}());\n"],"names":["arrangeLineEvent","events","oldEvents","JSON","parse","stringify","newEvents","startTime","endTime","start","end","start2","end2","push","length","i2","i1","newEvents2","shift","d1","d2","JudgeLineEvent","constructor","this","Note","type","time","positionX","holdTime","speed","floorPosition","SpeedEvent","value","JudgeLine","numOfNotes","numOfNotesAbove","numOfNotesBelow","bpm","speedEvents","notesAbove","notesBelow","judgeLineDisappearEvents","judgeLineMoveEvents","judgeLineRotateEvents","updateSefp","y","sort","a","b","evt","note","owo","owo2","owo3","updateDe","Chart","formatVersion","offset","judgeLineList","kfcFkXqsVw50","reverse","chart","duration","chartNew","line","judgeLine","tb","hook","before","set","Map","bgm","bgms","get","selectbgm","audio","i","numberOfChannels","getChannelData","awawa","modify","app","tt","document","querySelector","HTMLElement","pressTime","NaN","revolveWorld","isNaN","performance","now","style","cssText","Math","random","elem","activeFn","doneFn","failFn","timer","awaIn","requestAnimationFrame","cancelAnimationFrame","removeEventListener","awaOut","addEventListener","passive","longPress","fireModal","setInterval"],"mappings":"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"}